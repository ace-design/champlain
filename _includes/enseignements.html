{% assign enseignements = site.enseignements | sort: 'date' | reverse %}
{% assign year = 2000 %}

<div class="support">
<i class="fa fa-search"></i><input type="text" id="search-input" placeholder="Vous recherchez un enseignement ?" class="search-bar">
</div>
<div class="support">
<ul id="results-container" style="margin: 0"></ul>
</div>

<section>
    <!-- Script pointing to jekyll-search.js -->
    <script src="{{ "/assets/js/vendor/simple-jekyll-search.min.js" | relative_url }}" type="text/javascript"></script>

    <script type="text/javascript">
        SimpleJekyllSearch({
            searchInput: document.getElementById('search-input'),
            resultsContainer: document.getElementById('results-container'),
            json: '{{ "/assets/data/search_enseignements.json" | relative_url }}',
            searchResultTemplate: '<div class="support-teaser"><span><header><h1><a href="{url}">{sigle} - {title}</a></h1><div class="support-info"><p class="label">Par</p><p class="souslabel">{auteurs}</p></div><div class="support-info"><p class="label">A</p><p class="souslabel">{institution}</p><p class="souslabel">{composante}</p></div><div class="support-info"><p class="label">Niveau</p><p class="souslabel">{level}</p></div><div class="support-info"><p class="label">Domaines de compétence visés</p><br/><p class="souslabel">{competences}</p></header></span></div>',
            noResultsText: 'No results found',
            limit: 10,
            fuzzy: false,
            exclude: []
        })
    </script>
</section>


<div class="support">
    {% for enseignement in enseignements %}
    {% assign current_year = enseignement.date | date: "%Y" %}
    {% assign next_year = enseignement.date | date: "%Y" | plus: '1' %}
    {% if year != current_year  %} 
    <h2>{{ current_year }} - {{ next_year }}</h2>
    {% assign year = current_year %}
    {% endif %}
    
    <div class="support-teaser">
        <span>
            <header>
                <h1><a href="{{ enseignement.url | relative_url }}">{{ enseignement.sigle }} - {{ enseignement.title }}</a></h1>
                {% include enseignement_info.html item=enseignement %}
            </header>
        </span>
    </div>
    {% endfor %}
</div>




